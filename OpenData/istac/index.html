<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AIRC • ISTAC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../assets/css/style.css">
</head>
<body>
  <header class="site-header">
    <div class="logo-title">
      <img src="../../assets/img/AIRC_LOGO.png" alt="AIRC logo" class="logo">
      <div>
        <h1>AI Research Corps</h1>
        <p class="tagline">ISTAC · Serverless STAC + GeoParquet</p>
      </div>
    </div>
    <nav class="nav">
      <a href="/">Home</a>
      <a href="/OpenData/">Open Data</a>
      <a href="./catalog.json">catalog.json</a>
      <a href="./v/">Versions</a>
      <a href="./browser/">Browser</a>
    </nav>
  </header>

  <main>
    <section class="section">
      <h3 class="section-title">ISTAC</h3>
      <p class="section-intro">
        ISTAC is AIRC’s immutable, versioned STAC structure. Collections include STAC GeoParquet mirrors so users can run
        fast bbox/time queries in DuckDB without a server-side API.
      </p>

      <div class="card-grid">
        <article class="card">
          <h4>Browse (STAC)</h4>
          <p>Root catalog and versioned snapshots.</p>
          <ul>
            <li><a class="text-link" href="./catalog.json">Open catalog.json</a></li>
            <li><a class="text-link" href="./v/">Browse /v/ snapshots</a></li>
          </ul>
        </article>

        <article class="card">
          <h4>Browser UI</h4>
          <p>Visual explorer for the static catalog (enabled after deployment).</p>
          <a class="text-link" href="./browser/">Open ISTAC Browser (coming soon)</a>
        </article>

        <article class="card">
          <h4>Query (DuckDB)</h4>
          <p>Example query against the current published GeoParquet mirror.</p>
          <pre><code>import duckdb

con = duckdb.connect()
con.execute("INSTALL spatial;")
con.execute("LOAD spatial;")

url = "https://airesearchcorps.org/OpenData/istac/v/2026-02-27_1200/collections/sentinel-2-l2a/geoparquet/items.parquet"

df = con.execute("""
  SELECT id, datetime
  FROM read_parquet(url)
  WHERE datetime &gt;= TIMESTAMP '2026-02-13'
    AND datetime &lt;  TIMESTAMP '2026-02-27'
    AND ST_Intersects(
      geometry,
      ST_MakeEnvelope(-117.30, 32.60, -117.00, 32.95)
    )
  LIMIT 50
""").df()</code></pre>
        </article>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>© <span id="year"></span> AI Research Corps (AIRC)</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>