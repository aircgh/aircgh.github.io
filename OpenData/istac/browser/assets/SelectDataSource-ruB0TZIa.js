import{a as x,_ as I}from"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-Chbp_Z2O.js";import{_ as C}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CngqnOtr.js";import{_ as S}from"./BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-Bb6bSj6Z.js";import{bk as w,bl as f,n as o,B as a,L as i,q as r,G as s,_ as B,H as l,z as D,K as d,p as u,I as _,ax as U,y as m,d as V,bI as A,cl as N,br as L}from"./index-C1OYoqWz.js";import{d as M}from"./BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-DvtMcFs0.js";import{_ as P}from"./BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d--Rb1PgS9.js";import T from"./Description-BeJxhtwF.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--bf0uGAvK.js";import"./utils-DJTICtwe.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./useStateClass-BGbSLWFN-DW88tcHJ.js";import"./debounce-BHqBzJ1a-CHZZ73bA.js";const F=V({name:"SelectDataSource",components:{Description:T},data(){return{url:"",stacIndex:[]}},computed:{...L(["toBrowserPath"]),valid(){return this.url.length===0?null:!this.error},error(){if(!this.url)return null;try{let t=new URL(this.url);if(t.protocol){if(!t.host)return this.$t("index.urlMissingHost")}else return this.$t("index.urlMissingProtocol");return null}catch(t){return this.$t("index.urlInvalid",{error:t.message})}}},async created(){this.$store.commit("resetCatalog",!0);try{let t=await N.get("https://stacindex.org/api/catalogs");Array.isArray(t.data)&&(this.stacIndex=t.data)}catch(t){console.error("Failed to load STAC Index:",t)}},methods:{show(t){return t.access==="private"?!1:this.url?A.search(this.url,[t.title,t.url]):!0},setUrl(t){this.url=t},open(t){this.url=t,this.go()},go(){this.url&&this.$router.push(this.toBrowserPath(this.url))}}}),G={class:"select-data-source"},H={key:0},j={class:"d-flex justify-content-between align-items-baseline mb-1"};function q(t,e,z,E,K,R){const h=P,p=M,b=B,$=S,g=f("i18n-t"),c=C,y=f("Description"),v=I,k=x;return o(),a("main",G,[i($,{onSubmit:D(t.go,["prevent"])},{default:r(()=>[i(p,{id:"select",label:t.$t("index.specifyCatalog"),"label-for":"url","invalid-feedback":t.error,state:t.valid,class:"mb-3"},{default:r(()=>[i(h,{id:"url",type:"url","model-value":t.url,"onUpdate:modelValue":t.setUrl,placeholder:"https://..."},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label","invalid-feedback","state"]),e[0]||(e[0]=s()),i(b,{type:"submit",variant:"primary"},{default:r(()=>[s(l(t.$t("index.load")),1)]),_:1})]),_:1},8,["onSubmit"]),e[5]||(e[5]=s()),t.stacIndex.length>0?(o(),a("hr",H)):d("",!0),e[6]||(e[6]=s()),t.stacIndex.length>0?(o(),u(p,{key:1,class:"stac-index"},{label:r(()=>[i(g,{keypath:"index.selectStacIndex",tag:"span",scope:"global"},{stacIndex:r(()=>[...e[1]||(e[1]=[m("a",{href:"https://stacindex.org",target:"_blank"},"STAC Index",-1)])]),_:1})]),default:r(()=>[e[4]||(e[4]=s()),i(k,null,{default:r(()=>[(o(!0),a(_,null,U(t.stacIndex,n=>(o(),a(_,{key:n.id},[t.show(n)?(o(),u(v,{key:0,button:"",active:t.url===n.url,onClick:J=>t.open(n.url)},{default:r(()=>[m("div",j,[m("strong",null,l(n.title),1),e[2]||(e[2]=s()),n.isApi?(o(),u(c,{key:0,variant:"danger"},{default:r(()=>[s(l(t.$t("index.api")),1)]),_:1})):(o(),u(c,{key:1,variant:"success"},{default:r(()=>[s(l(t.$t("index.catalog")),1)]),_:1}))]),e[3]||(e[3]=s()),i(y,{description:n.summary,compact:""},null,8,["description"])]),_:2},1032,["active","onClick"])):d("",!0)],64))),128))]),_:1})]),_:1})):d("",!0)])}const at=w(F,[["render",q]]);export{at as default};
//# sourceMappingURL=SelectDataSource-ruB0TZIa.js.map
