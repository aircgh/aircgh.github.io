const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Description-BeJxhtwF.js","assets/_commonjsHelpers-CE1G-McA.js","assets/index-C1OYoqWz.js","assets/utils-DJTICtwe.js","assets/I18N-DlIXJTel.js","assets/index-BchvTk2E.css","assets/Description-BJNSZaWm.css","assets/vue-multiselect.esm-B3MmK7NW.js"])))=>i.map(i=>d[i]);
import{a4 as C,n,B as y,y as b,bk as P,bl as c,H as d,G as i,L as s,q as u,I as S,ax as z,p as o,A as E,v,K as f,_ as F,bt as h,bu as k}from"./index-C1OYoqWz.js";import{a as M}from"./BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE-D52XhUmS.js";import{b as U}from"./BFormSelect.vue_vue_type_script_setup_true_lang-djrVhugk-DuUwPhyv.js";import{_ as j}from"./BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d--Rb1PgS9.js";import{_ as R}from"./check-CfbwE_qj.js";import{_ as Y}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CngqnOtr.js";import{b as Q,_ as G,g as H}from"./BDropdownText.vue_vue_type_script_setup_true_lang-Cm6QYE9x-Ajgo5TND.js";import{D as K,C as w,a as J}from"./SearchFilter-C1wdVruG.js";import{i as W}from"./utils-DJTICtwe.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-B5CKDn4J.js";import"./useStateClass-BGbSLWFN-DW88tcHJ.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--bf0uGAvK.js";import"./debounce-BHqBzJ1a-CHZZ73bA.js";import"./BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-Bb6bSj6Z.js";import"./BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-DvtMcFs0.js";import"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-Fqdhapa9.js";import"./startOfWeek-m7vVpAR3.js";import"./en-US-DRXoBfJp.js";import"./match-DN4VZKeM.js";import"./buildMatchPatternFn-_eSDZv-o.js";import"./Loading-FzMMkwuw.js";import"./helper-CaHhXSPV.js";import"./helper-DO3U350M.js";const X={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function Z(t,e){return n(),y("svg",X,[...e[0]||(e[0]=[b("path",{fill:"currentColor",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"},null,-1)])])}const $=C({name:"bi-x-circle-fill",render:Z}),ee={name:"QueryableInput",components:{BDropdownDivider:H,BDropdown:G,BDropdownItemButton:Q,Description:h(()=>k(()=>import("./Description-BeJxhtwF.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Multiselect:h(()=>k(()=>import("./vue-multiselect.esm-B3MmK7NW.js"),__vite__mapDeps([7,2,3,1,4,5])))},mixins:[K],props:{value:{},operator:{type:Function,required:!0},negate:{type:Boolean,required:!0},queryable:{type:Object,required:!0},cql:{type:Object,required:!0}},emits:["remove-queryable","update:value","update:operator","update:negate"],data(){return{operatorsOpen:!1,cqlNot:J}},computed:{validation(){return this.queryable.isText?{type:"text",minlength:this.schema.minLength,maxlength:this.schema.maxLength,required:this.schema.minLength>0}:this.queryable.isNumeric?{type:"number",number:!0,min:this.schema.minimum,max:this.schema.maximum,step:this.schema.multipleOf||"any"}:{}},schema(){return this.queryable.schema},operators(){return this.queryable.getOperators(this.cql)},queryableOptions(){return this.queryable.isSelection?this.schema.enum:[]},arrayValues:{get(){return(this.value?.value||[]).map(e=>String(e))},set(t){this.updateValue(t.map(e=>this.castArrayItem(e)))}}},methods:{iterateOps(){let t=this.operators.findIndex(a=>a===this.operator),e=++t%this.operators.length;this.updateOperator(this.operators[e])},updateValue(t){let e=this.getEventValue(t);e=this.castValue(e),this.emitValue(w.create(e))},emitValue(t){this.$emit("update:value",t)},updateOperator(t){this.operator.valueType!==t.valueType&&this.emitValue(t.getDefaultValue(this.queryable)),this.$emit("update:operator",t),this.operatorsOpen=!1},updateNegate(t){this.$emit("update:negate",t)},addArrayValue(t){if(t=t.trim(),t==="")return;const e=this.castArrayItem(t),a=this.value?.value||[];this.updateValue([...a,e])},onArrayPaste(t){const e=t.clipboardData||window.clipboardData;if(!e)return;const a=e.getData("text");if(!a||!a.includes(","))return;t.preventDefault();const p=this.value?.value||[],m=a.split(",").map(r=>r.trim()).filter(r=>r!=="").map(r=>this.castArrayItem(r)).filter(r=>!p.includes(r));m.length>0&&this.updateValue([...p,...m])},castValue(t){return typeof t!="string"||(this.queryable.is("integer")?t=parseInt(t,10):this.queryable.is("number")&&(t=parseFloat(t))),t},castArrayItem(t){const e=this.queryable.isArray?this.queryable.arrayItems:this.queryable.types;if(typeof t!="string")return t;if(e.includes("string")){if(e.includes("integer")||e.includes("number")){if(e.includes("integer")&&/^-?\d+$/.test(t))return parseInt(t,10);if(e.includes("number")&&/^-?\d+(\.\d+)?$/.test(t))return parseFloat(t)}return t}else{if(e.includes("number"))return parseFloat(t);if(e.includes("integer"))return parseInt(t,10)}return t},updateBetweenValue(t,e){const a=this.getEventValue(e),p=this.value.slice(0);p[t]=w.create(this.castValue(a)),this.emitValue(p)},getEventValue(t){return W(t)&&"target"in t?t.target.value:t}}},te={class:"queryable-group"},ae={class:"queryable-row"},re={class:"title"},le={class:"long-label"},ie={class:"long-label"},ne={key:0,class:"value between"},se={key:0,class:"queryable-help text-muted small"};function ue(t,e,a,p,m,r){const g=Y,q=c("b-dropdown-item-button"),D=c("b-dropdown-divider"),O=R,x=c("b-dropdown"),_=j,I=c("multiselect"),B=c("VueDatePicker"),A=U,L=M,T=$,N=F,V=c("Description");return n(),y("div",te,[b("div",ae,[b("span",re,d(a.queryable.title),1),e[17]||(e[17]=i()),s(x,{modelValue:m.operatorsOpen,"onUpdate:modelValue":e[1]||(e[1]=l=>m.operatorsOpen=l),split:"","auto-close":"outside",size:"sm",class:"op",variant:"dark",text:a.operator.label,onSplitClick:r.iterateOps},{default:u(()=>[(n(!0),y(S,null,z(r.operators,l=>(n(),o(q,{key:l.SYMBOL,active:l===a.operator,onClick:oe=>r.updateOperator(l),"button-class":"queryable-item"},{default:u(()=>[b("span",le,d(l.longLabel),1),e[9]||(e[9]=i()),s(g,{variant:"dark",class:"ms-2"},{default:u(()=>[i(d(l.label),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128)),e[12]||(e[12]=i()),s(D),e[13]||(e[13]=i()),s(q,{"button-class":"queryable-item",active:a.negate,onClick:e[0]||(e[0]=l=>r.updateNegate(!a.negate))},{default:u(()=>[s(O,{class:E([{hide:!a.negate},"mt-1 me-2"])},null,8,["class"]),e[10]||(e[10]=i()),b("span",ie,d(m.cqlNot.longLabel),1),e[11]||(e[11]=i()),s(g,{variant:"dark",class:"ms-2"},{default:u(()=>[i(d(m.cqlNot.label),1)]),_:1})]),_:1},8,["active"])]),_:1},8,["modelValue","text","onSplitClick"]),e[18]||(e[18]=i()),a.operator.SYMBOL==="between"?(n(),y("div",ne,[s(_,v({number:a.queryable.isNumeric,type:a.queryable.isNumeric?"number":"text",size:"sm",value:a.value[0].value,onInput:e[2]||(e[2]=l=>r.updateBetweenValue(0,l))},r.validation),null,16,["number","type","value"]),e[14]||(e[14]=i()),e[15]||(e[15]=b("span",{class:"sep"},"-",-1)),e[16]||(e[16]=i()),s(_,v({number:a.queryable.isNumeric,type:a.queryable.isNumeric?"number":"text",size:"sm",value:a.value[1].value,onInput:e[3]||(e[3]=l=>r.updateBetweenValue(1,l))},r.validation),null,16,["number","type","value"])])):a.queryable.isArray||a.operator.SYMBOL==="in"?(n(),o(I,{key:1,class:"value",modelValue:r.arrayValues,"onUpdate:modelValue":e[4]||(e[4]=l=>r.arrayValues=l),multiple:"",taggable:!a.queryable.isSelection,options:a.queryable.isSelection?r.queryableOptions:r.arrayValues,placeholder:t.$t("search.arrayInput.helpText"),"tag-placeholder":t.$t("search.arrayInput.addValue"),onTag:r.addArrayValue,onPaste:r.onArrayPaste},{noOptions:u(()=>[i(d(t.$t("search.noOptions")),1)]),_:1},8,["modelValue","taggable","options","placeholder","tag-placeholder","onTag","onPaste"])):a.queryable.isTemporal?(n(),o(B,{key:2,class:"value","model-value":a.value.value,"onUpdate:modelValue":r.updateValue,locale:t.datepickerLang,"week-start":t.weekStartDay,formats:{input:a.queryable.isDateTime?t.dateTimeFormat:t.dateFormat},"close-on-scroll":!1,"time-config":{enableTimePicker:a.queryable.isDateTime,seconds:a.queryable.isDateTime,timePickerInline:!0},"input-attrs":{clearable:!0},"auto-apply":""},null,8,["model-value","onUpdate:modelValue","locale","week-start","formats","time-config"])):a.queryable.isSelection?(n(),o(A,{key:3,options:r.queryableOptions,size:"sm",class:"value","model-value":a.value.value,"onUpdate:modelValue":e[5]||(e[5]=l=>r.updateValue(l))},null,8,["options","model-value"])):a.queryable.isText||a.queryable.isNumeric?(n(),o(_,v({key:4,size:"sm",class:"value","model-value":a.value.value,"onUpdate:modelValue":e[6]||(e[6]=l=>r.updateValue(l))},r.validation),null,16,["model-value"])):a.queryable.isBoolean?(n(),o(L,v({key:5,switch:"",class:"value","model-value":a.value.value,"onUpdate:modelValue":e[7]||(e[7]=l=>r.updateValue(l))},r.validation),{default:u(()=>[i(d(t.$t(`checkbox.${a.value.value}`)),1)]),_:1},16,["model-value"])):f("",!0),e[19]||(e[19]=i()),s(N,{class:"delete",size:"sm",variant:"danger",onClick:e[8]||(e[8]=l=>t.$emit("remove-queryable"))},{default:u(()=>[s(T,{"aria-hidden":"true"})]),_:1})]),e[21]||(e[21]=i()),a.queryable.description||a.operator.description?(n(),y("div",se,[a.operator.description?(n(),o(V,{key:0,description:a.operator.description,inline:""},null,8,["description"])):f("",!0),e[20]||(e[20]=i()),a.queryable.description?(n(),o(V,{key:1,description:a.queryable.description,inline:""},null,8,["description"])):f("",!0)])):f("",!0)])}const Pe=P(ee,[["render",ue]]);export{Pe as default};
//# sourceMappingURL=QueryableInput-BZUgFOrX.js.map
