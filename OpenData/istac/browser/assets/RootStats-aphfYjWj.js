const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StatsChart-BjLXTap9.js","assets/helper-CaHhXSPV.js","assets/helper-DO3U350M.js","assets/I18N-DlIXJTel.js","assets/_commonjsHelpers-CE1G-McA.js","assets/interface-DUdTlFym.js","assets/formatters-DHrlMhMY.js","assets/index-C1OYoqWz.js","assets/utils-DJTICtwe.js","assets/index-BchvTk2E.css","assets/datatypes-XrFOh23H.js","assets/index-DdUMHWZH.js"])))=>i.map(i=>d[i]);
import{bk as U,bl as S,n as o,B as i,p,K as c,G as a,I as y,y as d,H as f,ax as _,q as $,L as T,br as w,bs as x,bt as K,bu as B}from"./index-C1OYoqWz.js";import{_ as G}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CngqnOtr.js";import{h}from"./helper-CaHhXSPV.js";import{U as V}from"./Url-CsTta1PD.js";import{i as j,s as A}from"./utils-DJTICtwe.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--bf0uGAvK.js";import"./helper-DO3U350M.js";import"./BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-DvtMcFs0.js";import"./useStateClass-BGbSLWFN-DW88tcHJ.js";import"./BInputGroupText.vue_vue_type_script_setup_true_lang-BBN5F0A4-Dy0-VIHE.js";import"./BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d--Rb1PgS9.js";import"./debounce-BHqBzJ1a-CHZZ73bA.js";const E={name:"RootStats",components:{StatsChart:K(()=>B(()=>import("./StatsChart-BjLXTap9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Url:V},computed:{...x(["conformsTo"]),...w(["root"]),rootUrl(){return this.root?this.root.getAbsoluteUrl():null},hasConformances(){return Array.isArray(this.conformsTo)&&this.conformsTo.length>0},conformances(){if(!this.hasConformances)return null;let e={OGC:{},STAC:{},Other:{}};for(let t of this.conformsTo){let n=this.parseConformance(t);e[n.type][t]=n}for(let t in e)A(e[t])===0&&delete e[t];return e},stats(){if(!this.root)return null;let e={"stats:catalogs":{label:this.$t("stacCatalog",2)},"stats:collections":{label:this.$t("stacCollection",2)},"stats:items":{label:this.$t("stacItem",2)}};for(let t in e)if(j(this.root[t])){let n=Object.assign(e[t],this.root[t]);A(n.versions)===1&&(n.version=Object.keys(n.versions)[0],delete n.versions)}else delete e[t];return A(e)>0?e:null}},methods:{parseConformance(e){let t=e,n="Other",C=null;if(e.startsWith("http://www.opengis.net/spec/")){n="OGC";let l=e.match(/^http:\/\/www\.opengis\.net\/spec\/([^/]+)\/([^/]+)\/conf\/(.+)$/);if(l){let[,r,b,u]=l;C=b;let m=r.split("-");m.length===3&&m[0]==="ogcapi"?r=`OGC API - ${h.formatKey(m[1])} - Part ${m[2]}`:r==="cql2"?r="CQL2":r=h.formatKey(r),u=h.formatKey(u),t=`${r} - ${u}`}}else if(e.startsWith("https://api.stacspec.org/")){n="STAC";let l=e.match(/^https?:\/\/api\.stacspec\.org\/([^/]+)\/([^/#]+)(?:#(.+))?$/);l&&(C=l[1],t=h.formatKey(l[2]),l[3]&&(t+=" - "+h.formatKey(l[3])))}return{type:n,title:t,version:C}}}},I={class:"root-stats"},L=["title"],N={class:"charts"};function P(e,t,n,C,l,r){const b=S("Url"),u=G,m=S("StatsChart");return o(),i("div",I,[r.rootUrl?(o(),p(b,{key:0,id:"stacUrl",url:r.rootUrl,label:e.$t("source.locatedAt")},null,8,["url","label"])):c("",!0),t[7]||(t[7]=a()),r.hasConformances?(o(),i(y,{key:1},[d("h4",null,f(e.$t("source.conformanceClasses")),1),t[1]||(t[1]=a()),(o(!0),i(y,null,_(r.conformances,(s,v)=>(o(),i("dl",{key:v},[d("dt",null,f(v),1),t[0]||(t[0]=a()),d("dd",null,[d("ul",null,[(o(!0),i(y,null,_(s,(k,O)=>(o(),i("li",{key:O,title:O},[a(f(k.title)+" ",1),k.version?(o(),p(u,{key:0,pill:"",variant:"secondary",class:"ms-1"},{default:$(()=>[a(f(k.version),1)]),_:2},1024)):c("",!0)],8,L))),128))])])]))),128))],64)):c("",!0),t[8]||(t[8]=a()),r.stats?(o(),i(y,{key:2},[d("h4",null,f(e.$t("source.statistics")),1),t[6]||(t[6]=a()),(o(!0),i(y,null,_(r.stats,(s,v)=>(o(),i("dl",{key:v},[d("dt",null,[a(f(s.label)+" ",1),T(u,{pill:"",variant:"primary",class:"ms-1"},{default:$(()=>[a(f(s.count),1)]),_:2},1024),t[2]||(t[2]=a()),s.version?(o(),p(u,{key:0,pill:"",variant:"secondary",class:"ms-1"},{default:$(()=>[a(f(s.version),1)]),_:2},1024)):c("",!0)]),t[5]||(t[5]=a()),d("dd",N,[s.extensions?(o(),p(m,{key:0,type:"extensions",data:s.extensions,count:s.count},null,8,["data","count"])):c("",!0),t[3]||(t[3]=a()),s.assets?(o(),p(m,{key:1,type:"assets",data:s.assets,count:s.count},null,8,["data","count"])):c("",!0),t[4]||(t[4]=a()),!s.version&&s.versions?(o(),p(m,{key:2,type:"versions",data:s.versions,count:s.count},null,8,["data","count"])):c("",!0)])]))),128))],64)):c("",!0)])}const tt=U(E,[["render",P]]);export{tt as default};
//# sourceMappingURL=RootStats-aphfYjWj.js.map
