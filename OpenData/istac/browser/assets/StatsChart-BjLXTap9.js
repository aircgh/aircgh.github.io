import{h as n}from"./helper-CaHhXSPV.js";import{r as l}from"./interface-DUdTlFym.js";import{S as p,f as c}from"./formatters-DHrlMhMY.js";import{bk as m,n as o,B as u,p as h,F as d,bI as f}from"./index-C1OYoqWz.js";import{P as x,B as y,C as _,p as b,a as v,b as g,A as E,c as B,d as S,L as $}from"./index-DdUMHWZH.js";import"./helper-DO3U350M.js";import"./I18N-DlIXJTel.js";import"./_commonjsHelpers-CE1G-McA.js";import"./datatypes-XrFOh23H.js";import"./utils-DJTICtwe.js";var k=l();_.register(b,v,g,E,B,S,$);const w={name:"StatsChart",components:{Bar:y,Pie:x},mixins:[p({formatMediaType:c.formatMediaType})],props:{data:{type:Object,required:!0},type:{type:String,required:!0},count:{type:Number,required:!0},options:{type:Object,default:()=>({})}},computed:{component(){return this.type==="versions"?"Pie":"Bar"},title(){switch(this.type){case"versions":return this.$t("source.stacVersion");case"extensions":return this.$t("source.stacExtension");case"assets":return this.$t("source.fileFormat");default:return""}},allOptions(){let e={responsive:!0,plugins:{title:{display:!0,text:this.title}},scales:{y:{min:0,max:this.count,title:{display:!1}}}};return Object.assign(e,this.options)},chartData(){let e=[],r=[];for(let t in this.data){let s=this.data[t];r.push(s);let i;switch(this.type){case"extensions":{let a=this.parseExtension(t);i=`${a.title}`,a.version&&(i+=` (${a.version})`);break}case"assets":i=this.formatMediaType(t);break;default:i=t}e.push(i)}return{labels:e,datasets:[{data:r}]}}},methods:{parseExtension(e){let r=null,t=e,s=e.match(/^https?:\/\/stac-extensions\.github\.io\/([^/]+)\/v?([^/]+)(?:\/([^/.]+))?\/schema/);return s?(r=s[2],t=k.extension(s[1]),s[3]&&(t+=" - "+n.formatKey(s[3]))):(t=e.replace(/^https?:\/\/(www.)?/,"").replace(/\/schema(\.json)?$/,""),t=f.shortenTitle(t,30)),{title:t,version:r}}}},C={class:"chart mb-4"};function O(e,r,t,s,i,a){return o(),u("div",C,[(o(),h(d(a.component),{data:a.chartData,options:a.allOptions},null,8,["data","options"]))])}const K=m(w,[["render",O]]);export{K as default};
//# sourceMappingURL=StatsChart-BjLXTap9.js.map
