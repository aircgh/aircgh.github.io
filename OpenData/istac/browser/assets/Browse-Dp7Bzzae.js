const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnonymizedNotice-DOlccCHC.js","assets/index-EEKoSAfw.js","assets/utils-DJTICtwe.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-BchvTk2E.css","assets/Assets-BR0GC7_0.js","assets/BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-BUJNSi-0.js","assets/BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-CmvwVo5W.js","assets/BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-BUjEcP57.js","assets/CollectionLink-DLZRK7j3.js","assets/Catalogs-B03kkeYL.js","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-CJj1_YW7.js","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--BICBjaaT.js","assets/CardMixin-CZxdeYDP.js","assets/formatters-Cg3Rg20C.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-CG3PpgqI.js","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-CyyBIvaW.js","assets/Loading-DF-Qn8M_.js","assets/Loading-BLYcl2tz.css","assets/Catalogs-DUE2iSw8.css","assets/DeprecationNotice-kBo5sSm0.js","assets/Description-D9oHSDIk.js","assets/Description-BJNSZaWm.css","assets/Items-0oQmoZAX.js","assets/BrowseMixin-CmoJbosp.js","assets/DeprecationNotice-D31shaCs.css","assets/Keywords-BcKzSJCw.js","assets/Keywords-LHIkcT_2.css","assets/LinkList-CGab8p5Z.js","assets/HrefActions-CQ2K3Hk6.js","assets/BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-BrDhjgqu.js","assets/HrefActions-DeDG8trG.css","assets/index-0qYpnmhW.js","assets/index.esm-aL1O-Kk3.js","assets/util-DpkBWlz8.js","assets/interface-BZlQ2CRx.js","assets/helper-CaHhXSPV.js","assets/LinkList-CJUlTDX0.css","assets/MapView-M2jne4eP.js","assets/GeoJSON-CeOkJNhj.js","assets/BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-eyD5Sj5b.js","assets/useStateClass-BGbSLWFN-00uHobAK.js","assets/GeoJSON-Bh2emOAl.css","assets/WMTSCapabilities-DVaGRzBu.js","assets/Image-BgRT-RxN.js","assets/ImageLayer-CgehtxLz.js","assets/BaseImage-BJE6NhyS.js","assets/Tile-DheFLPcT.js","assets/TileLayer-Dc6tq0Gn.js","assets/DataTile-Bmbl2OFx.js","assets/Tile-DIYofsPF.js","assets/Tile-DOycnn12.js","assets/common-BO1mfZuN.js","assets/TileRange-2Tc-Ry00.js","assets/LRUCache-bbU-Dn-U.js","assets/tilecoord-CCvhFDG2.js","assets/BaseTile-ETqRVqhp.js","assets/TileProperty-BF4LcWSy.js","assets/VectorTile-BqFU2XQ3.js","assets/WebGLTile-DQ-usLi-.js","assets/compileUtil-sRJmHDmy.js","assets/mat4-CeypvY8Z.js","assets/ImageStatic-yB0xBZJS.js","assets/Image-B9HrrUhk.js","assets/resolution-CU8ppKQ3.js","assets/common-9rOs42pz.js","assets/static-DEdTgU_n.js","assets/TileJSON-CsyG4vWC.js","assets/net-DZpGeuGz.js","assets/Tile-VALq5jNu.js","assets/TileGrid-De1n6MP2.js","assets/tileurlfunction-BzDPhbsW.js","assets/uri-Dl9pl3_t.js","assets/TileImage-c3ACdgwy.js","assets/UrlTile-6inhu0_e.js","assets/TileEventType-CTN_nmJ7.js","assets/TileWMS-Cim86C_t.js","assets/wms-B6t0u64h.js","assets/VectorTile-CcosAgei.js","assets/WMTS-CGJQEi8C.js","assets/XYZ-gF6v-tMH.js","assets/DataTile-f1xhAM11.js","assets/MVT-DixZ1Uju.js","assets/geotiff-D5lVkYkd.js","assets/__vite-browser-external-B1O5LaIO.js","assets/MapView-eDbLtyS8.css","assets/MetadataGroups-BUW_GeJ2.js","assets/MetadataGroups-DSbVrFW-.css","assets/Providers-CBnasvI0.js","assets/Providers-UMkVmba1.css","assets/Thumbnails-DnCb1MiZ.js","assets/Thumbnails-C5KZNdih.css"])))=>i.map(i=>d[i]);
import{bk as R,n,B as $,y as k,C as fe,G as o,H as I,A as q,d as T,bI as z,cI as ge,br as O,bs as G,bp as S,bw as J,bx as K,cD as W,bl as a,L as m,q as d,b4 as X,p as r,K as l,b1 as Y,bt as u,bu as h,v as ye,ct as be,b7 as ke,F as Ae}from"./index-EEKoSAfw.js";import{b as Z}from"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-CG3PpgqI.js";import{_ as x,a as ee}from"./BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-CmvwVo5W.js";import te from"./Description-D9oHSDIk.js";import{i as M,s as se,U as Le,h as we}from"./utils-DJTICtwe.js";import{C as ve}from"./Catalogs-B03kkeYL.js";import $e from"./Items-0oQmoZAX.js";import{S as _e,f as Q}from"./formatters-Cg3Rg20C.js";import{B as Ie}from"./BrowseMixin-CmoJbosp.js";const Me=T({name:"ReadMore",props:{lines:{type:Number,default:3},text:{type:String,default:"Read more"},textLess:{type:String,default:"Read less"}},data(){return{readmore:!1,expanded:!1,inMaxRange:!1}},mounted(){const e=this.getLineHeight(this.$refs.to);this.lines&&this.$refs.to.style.setProperty("--nlines",this.lines);let t=2;this.lines>12?t=4:this.lines>6&&(t=3),this.$refs.ht.style.setProperty("--nlines",t),setTimeout(()=>{if(!this.$refs.to||!this.$refs.ht)return;this.readmore=this.$refs.to.offsetHeight<this.$refs.to.scrollHeight;const s=(this.lines+1)*e;this.$refs.to.scrollHeight<=s&&(this.inMaxRange=!0),this.$refs.to.style.setProperty("--lineHeight",e+"px"),this.$refs.ht.style.setProperty("--lineHeight",e+"px")})},methods:{toggle(){this.expanded?(this.$refs.to.style.removeProperty("max-height"),this.expanded=!1):(this.expanded=!0,this.$refs.to.style.setProperty("max-height",this.$refs.to.scrollHeight+"px"))},getLineHeight(e){let t=document.createElement(e.children[0].nodeName);const s=getComputedStyle(e.children[0]);t.setAttribute("style","position:absolute;left:-999em;margin:0px;padding:0px;font-family:"+s.fontFamily+";font-size:"+s.fontSize),t.innerHTML="test",t=document.body.appendChild(t);const i=t.clientHeight;return t.parentNode.removeChild(t),i}}}),Ce={ref:"to",class:"text-overflow-content"},Te={ref:"ht",class:"hide-text"},Ee={class:"read-more-button"};function De(e,t,s,i,p,f){return n(),$("div",{class:q(["text-overflow",{expanded:e.expanded,"no-overflow":e.inMaxRange}])},[k("div",Ce,[fe(e.$slots,"default",{},void 0,!0)],512),t[1]||(t[1]=o()),k("div",Te,null,512),t[2]||(t[2]=o()),k("div",{onClick:t[0]||(t[0]=(...c)=>e.toggle&&e.toggle(...c)),class:"button-read-more"},[k("div",Ee,[k("span",null,I(e.expanded?e.textLess:e.text),1)])])],2)}const ie=R(Me,[["render",De],["__scopeId","data-v-4361f5e9"]]),ne=T({data(){return{tab:null,shownOnMap:[],selectedAssets:[]}},computed:{...G(["showThumbnailsAsAssets"]),...O(["data"]),hasAssets(){return this.assets.length>0},assets(){if(!this.data)return[];let e=this.data.getAssets();return this.showThumbnailsAsAssets||(e=e.filter(t=>!this.thumbnails.includes(t))),e},hasThumbnails(){return this.thumbnails.length>0},thumbnails(){return this.data?this.data.getThumbnails():[]},additionalLinks(){return this.data?this.data.getLinksWithOtherRels(ge).filter(e=>e.rel!=="preview"||!e.canBrowserDisplayImage()):[]},selectedReferences(){return this.tab===0?this.shownOnMap:this.thumbnails}},methods:{showAsset(e){this.thumbnails.find(t=>t.is(e))?this.tab=1:(this.tab=0,this.selectedAssets=[e]),this.$refs.tabs&&z.scrollTo(this.$refs.tabs.$el)},dataChanged(e){Array.isArray(e)?this.shownOnMap=e:this.shownOnMap=[]},handleEmptyMap(){this.hasThumbnails&&(this.tab=1)}}}),oe={computed:{isDeprecated(){return!!this.data.getMetadata("deprecated")},showDeprecation(){return this.isDeprecated||this.latestLink||this.successorLink||this.predecessorLink},latestLink(){return this.data.getStacLinkWithRel("latest-version")},successorLink(){const e=this.data.getStacLinkWithRel("successor-version");return e&&this.latestLink&&e.href===this.latestLink.href?null:e},predecessorLink(){return!this.isDeprecated&&this.data.getStacLinkWithRel("predecessor-version")}}};function ae(e,t){let s=t.getters.toBrowserPath(e),i=Le(window.location.origin.toString());return t.state.historyMode==="hash"?(i.path(t.state.pathPrefix),i.fragment(s)):i.path(z.removeTrailingSlash(t.state.pathPrefix)+s),i.toString()}function re(e,t){Array.isArray(t)&&t.length>=4&&(e.spatialCoverage={"@type":"Place",geo:{"@type":"GeoShape",box:(t||[]).join(" ")}})}function le(e){return Array.isArray(e)&&e.length===2&&(typeof e[0]=="string"||typeof e[1]=="string")?e.map(t=>t||"..").join("/"):null}function de(e){return se(e.assets)>0?Object.values(e.assets).map(t=>({"@type":"DataDownload",contentUrl:K(t.href,e.getAbsoluteUrl()),encodingFormat:t.type,name:t.title})):[]}function P(e,t,s,i="DataCatalog"){return e.map(p=>{let f,c;p instanceof S?(f=J(p),c=p.getAbsoluteUrl()):(f=p.title,c=K(p.href,t.getAbsoluteUrl()));let y={"@type":i,name:f,url:ae(c,s),isBasedOn:c};return i==="Dataset"&&(y.description=me(p,s)),y})}function D(e,t){return e.filter(s=>M(s)&&Array.isArray(s.roles)&&s.roles.includes(t)).map(s=>({"@type":"Organization",name:s.name,description:s.description,url:s.url,email:s.email||s.mail}))}function me(e,t){let s,i;if(e instanceof S?(s=e.isItem()?"Item":e.type,i=e.collection):M(e)&&e.rel==="item"&&(s="Item"),s){let p=W.global.t(`stac${s}`,1),f=W.global.t("in",{catalog:i||t.catalogTitle});return`SpatioTemporal Asset Catalog (STAC)
${p} - ${e.id} ${f}`}}function pe(e,t,s){let i=J(e),p=e.getAbsoluteUrl(),f=ae(p,s),c=e.getMetadata("language")?.code,y=e.getThumbnails(!0),A;y.length>0&&(A=y[0].getAbsoluteUrl());let g=e.getMetadata("license");g&&g!=="proprietary"&&g!=="various"&&g!=="other"?g=`https://spdx.org/licenses/${g}.html`:g=e.getLinkWithRel("license")?.href,g&&(g=K(g,e.getAbsoluteUrl()));let L=e.getMetadata("providers"),_,b,w,v;return se(L)>0&&(_=D(L,"licensor"),b=D(L,"producer"),w=D(L,"host"),v=D(L,"processor")),{"@context":"https://schema.org/","@type":t,name:i,description:e.getMetadata("description")||me(e,s),citation:e.getMetadata("sci:citation"),identifier:e.getMetadata("sci:doi")||e.id,keywords:e.getMetadata("keywords"),license:g,url:f,isBasedOn:p,dateCreated:e.getMetadata("created"),dateModified:e.getMetadata("updated"),datePublished:e.getMetadata("published"),expires:e.getMetadata("expires"),inLanguage:c,thumbnailUrl:A,version:e.getMetadata("version"),image:A,copyrightHolder:_,producer:b,provider:w,creator:v}}function Pe(e,t,s){if(!(e instanceof S))return null;t=t.filter(p=>M(p)),t.length>1&&(t=t.filter((p,f)=>t.findIndex(c=>c.isBasedOn===p.isBasedOn)!==f));let i=pe(e,"DataCatalog",s);return e.isCollection()&&(e.extent?.temporal?.interval.length>0&&(i.temporalCoverage=le(e.extent.temporal.interval[0])),e.extent?.spatial?.bbox.length>0&&re(i,e.extent.spatial.bbox[0]),i.associatedMedia=de(e)),i.hasPart=P(s.getters.catalogs,e,s),i.dataset=P(s.getters.items,e,s,"Dataset"),i.isPartOf=P(t,e,s),i}function Re(e,t,s){if(!(e instanceof S))return null;t=t.filter(c=>M(c));let i=pe(e,"Dataset",s);i.includedInDataCatalog=P(t,e,s);let p=e.getMetadata("start_datetime"),f=e.getMetadata("end_datetime");return p||f?i.temporalCoverage=le([p,f]):i.temporalCoverage=e.getMetadata("datetime"),re(i,e.bbox),i.distribution=de(e),i}function ue(e,t){let s="schema-org",i=e.getElementById(s);i||(i=e.createElement("script"),i.type="application/ld+json",i.id=s,e.head.appendChild(i)),i.innerText=JSON.stringify(t)}const Oe=T({name:"Item",components:{BTab:ee,BTabs:x,BCard:Z,AnonymizedNotice:u(()=>h(()=>import("./AnonymizedNotice-DOlccCHC.js"),__vite__mapDeps([0,1,2,3,4,5]))),Assets:u(()=>h(()=>import("./Assets-BR0GC7_0.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9]))),CollectionLink:u(()=>h(()=>import("./CollectionLink-DLZRK7j3.js"),__vite__mapDeps([10,11,1,2,3,4,5,12,13,14,15,16,17,18,19,20,21,22]))),Description:te,DeprecationNotice:u(()=>h(()=>import("./DeprecationNotice-kBo5sSm0.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,18,8,11,12,13,14,15,16,17,19,20,21,22,26,9,27,28]))),Keywords:u(()=>h(()=>import("./Keywords-BcKzSJCw.js"),__vite__mapDeps([29,12,1,2,3,4,5,13,30]))),LinkList:u(()=>h(()=>import("./LinkList-CGab8p5Z.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,24,25,34,35,15,16,17,36,37,38,39,40]))),MapView:u(()=>h(()=>import("./MapView-M2jne4eP.js"),__vite__mapDeps([41,1,2,3,4,5,42,43,44,13,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88]))),MetadataGroups:u(()=>h(()=>import("./MetadataGroups-BUW_GeJ2.js").then(e=>e.M),__vite__mapDeps([89,1,2,3,4,5,19,35,15,16,17,36,37,38,18,90]))),Providers:u(()=>h(()=>import("./Providers-CBnasvI0.js").then(e=>e.a),__vite__mapDeps([91,1,2,3,4,5,33,12,13,7,8,9,92]))),ReadMore:ie,Thumbnails:u(()=>h(()=>import("./Thumbnails-DnCb1MiZ.js"),__vite__mapDeps([93,1,2,3,4,5,94])))},mixins:[ne,oe],data(){return{ignoredMetadataFields:["description","keywords","providers","title","deprecated","proj:bbox","proj:geometry","auth:schemes","anon:warning"]}},computed:{...G(["data","url"]),...O(["collectionLink","parentLink"])},watch:{data:{immediate:!0,handler(e){try{let t=Re(e,[this.collectionLink,this.parentLink],this.$store);ue(document,t)}catch(t){console.error(t)}}}}}),Se={class:"mb-4"},Ve={class:"intro"},Be={key:0};function Fe(e,t,s,i,p,f){const c=a("MapView"),y=a("b-tab"),A=a("Thumbnails"),g=a("b-tabs"),L=a("b-card"),_=a("Assets"),b=a("LinkList"),w=X,v=a("DeprecationNotice"),V=a("AnonymizedNotice"),E=a("Description"),B=a("ReadMore"),F=a("Keywords"),N=a("CollectionLink"),C=a("Providers"),H=a("MetadataGroups"),U=Y;return n(),$("div",{class:"item",key:e.data.id},[m(U,null,{default:d(()=>[m(w,{class:"left"},{default:d(()=>[k("section",Se,[m(L,{"no-body":"",class:"maps-preview"},{default:d(()=>[m(g,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=j=>e.tab=j),ref:"tabs",card:"",pills:"",vertical:"",end:""},{default:d(()=>[m(y,{title:e.$t("map"),"no-body":""},{default:d(()=>[m(c,{stac:e.data,assets:e.selectedAssets,onChanged:e.dataChanged,onEmpty:e.handleEmptyMap},null,8,["stac","assets","onChanged","onEmpty"])]),_:1},8,["title"]),t[1]||(t[1]=o()),e.hasThumbnails?(n(),r(y,{key:0,title:e.$t("thumbnails"),"no-body":""},{default:d(()=>[m(A,{thumbnails:e.thumbnails},null,8,["thumbnails"])]),_:1},8,["title"])):l("",!0)]),_:1},8,["modelValue"])]),_:1})]),t[2]||(t[2]=o()),e.hasAssets?(n(),r(_,{key:0,assets:e.assets,context:e.data,shown:e.selectedReferences,onShowAsset:e.showAsset},null,8,["assets","context","shown","onShowAsset"])):l("",!0),t[3]||(t[3]=o()),e.additionalLinks.length>0?(n(),r(b,{key:1,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),_:1}),t[11]||(t[11]=o()),m(w,{class:"right"},{default:d(()=>[k("section",Ve,[e.data.properties.description?(n(),$("h2",Be,I(e.$t("description")),1)):l("",!0),t[4]||(t[4]=o()),e.showDeprecation?(n(),r(v,{key:1,data:e.data},null,8,["data"])):l("",!0),t[5]||(t[5]=o()),e.data.properties["anon:warning"]?(n(),r(V,{key:2,warning:e.data.properties["anon:warning"]},null,8,["warning"])):l("",!0),t[6]||(t[6]=o()),e.data.properties.description?(n(),r(B,{key:3,lines:10,text:e.$t("read.more"),"text-less":e.$t("read.less")},{default:d(()=>[m(E,{description:e.data.properties.description},null,8,["description"])]),_:1},8,["text","text-less"])):l("",!0),t[7]||(t[7]=o()),Array.isArray(e.data.properties.keywords)&&e.data.properties.keywords.length>0?(n(),r(F,{key:4,keywords:e.data.properties.keywords,class:"mb-3"},null,8,["keywords"])):l("",!0)]),t[8]||(t[8]=o()),e.collectionLink?(n(),r(N,{key:0,link:e.collectionLink},null,8,["link"])):l("",!0),t[9]||(t[9]=o()),e.data.properties.providers?(n(),r(C,{key:1,providers:e.data.properties.providers},null,8,["providers"])):l("",!0),t[10]||(t[10]=o()),m(H,{data:e.data,type:"Item",ignoreFields:e.ignoredMetadataFields},null,8,["data","ignoreFields"])]),_:1})]),_:1})])}const Ne=R(Oe,[["render",Fe]]),He=T({name:"Catalog",components:{BTab:ee,BTabs:x,BCard:Z,AnonymizedNotice:u(()=>h(()=>import("./AnonymizedNotice-DOlccCHC.js"),__vite__mapDeps([0,1,2,3,4,5]))),Assets:u(()=>h(()=>import("./Assets-BR0GC7_0.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9]))),Catalogs:ve,CollectionLink:u(()=>h(()=>import("./CollectionLink-DLZRK7j3.js"),__vite__mapDeps([10,11,1,2,3,4,5,12,13,14,15,16,17,18,19,20,21,22]))),DeprecationNotice:u(()=>h(()=>import("./DeprecationNotice-kBo5sSm0.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,18,8,11,12,13,14,15,16,17,19,20,21,22,26,9,27,28]))),Description:te,Items:$e,Keywords:u(()=>h(()=>import("./Keywords-BcKzSJCw.js"),__vite__mapDeps([29,12,1,2,3,4,5,13,30]))),LinkList:u(()=>h(()=>import("./LinkList-CGab8p5Z.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,24,25,34,35,15,16,17,36,37,38,39,40]))),MapView:u(()=>h(()=>import("./MapView-M2jne4eP.js"),__vite__mapDeps([41,1,2,3,4,5,42,43,44,13,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88]))),MetadataGroups:u(()=>h(()=>import("./MetadataGroups-BUW_GeJ2.js").then(e=>e.M),__vite__mapDeps([89,1,2,3,4,5,19,35,15,16,17,36,37,38,18,90]))),Providers:u(()=>h(()=>import("./Providers-CBnasvI0.js").then(e=>e.a),__vite__mapDeps([91,1,2,3,4,5,33,12,13,7,8,9,92]))),ReadMore:ie,Thumbnails:u(()=>h(()=>import("./Thumbnails-DnCb1MiZ.js"),__vite__mapDeps([93,1,2,3,4,5,94])))},mixins:[ne,_e({formatLicense:Q.formatLicense,formatTemporalExtents:Q.formatTemporalExtents}),oe],data(){return{filters:{},ignoredMetadataFields:["stac_version","stac_extensions","id","type","title","description","keywords","providers","license","extent","summaries","links","assets","item_assets","proj:bbox","proj:geometry","conformsTo","deprecated","anon:warning","stats:catalogs","stats:collections","stats:items","auth:schemes","stac_browser"]}},computed:{...G(["data","url","apiItems","apiItemsLink","apiItemsPagination","apiItemsNumberMatched","nextCollectionsLink","stateQueryParameters"]),...O(["catalogs","collectionLink","isCollection","items","getApiItemsLoading","parentLink","rootLink"]),cssStacType(){return we(this.data?.type)?this.data?.type.toLowerCase():null},showFilters(){return!!this.stateQueryParameters.itemFilterOpen},linkPosition(){return this.additionalLinks.length===0?null:this.isCollection||!this.hasThumbnails?"right":"left"},apiItemsLoading(){return this.getApiItemsLoading(this.data)},licenses(){return this.data.license?this.formatLicense(this.data.license,null,null,this.data):null},providers(){let e=[];return Array.isArray(this.data.providers)&&this.data.providers.length>0?e=this.data.providers:this.isCollection&&M(this.data.summaries)&&Array.isArray(this.data.summaries.providers)&&(e=this.data.summaries.providers),e.length>0?e:null},temporalExtents(){if(this.isCollection&&this.data.extent.temporal.interval.length>0){let e=this.data.extent.temporal.interval;return e.length>1&&(e=e.slice(1)),this.formatTemporalExtents(e)}return null},hasItemAssets(){return this.itemAssets.length>0},itemAssets(){return!this.data||!M(this.data.item_assets)?[]:Object.values(this.data.item_assets)},itemPages(){let e=Object.assign({},this.apiItemsPagination);return!e.first&&this.data&&this.apiItemsLink&&this.apiItemsLink.rel!=="items"&&(e.first=z.addFiltersToLink(this.data.getApiItemsLink(),this.filters)),e},isApi(){return!!this.apiItemsLink},hasItems(){return this.items.length>0||this.isApi},hasCatalogs(){return this.catalogs.length>0},mapData(){const e={};if(this.selectedAssets.length>0)e.assets=this.selectedAssets;else{const t=this.items.filter(s=>s.type==="Feature");t.length>0&&(e.children=new be({type:"FeatureCollection",features:t}))}return e}},watch:{data:{immediate:!0,handler(e){try{let t=Pe(e,[this.parentLink,this.rootLink],this.$store);ue(document,t)}catch(t){console.error(t)}}}},methods:{filtersShown(e){this.$store.commit("updateState",{type:"itemFilterOpen",value:e?1:null})},loadMoreCollections(){this.$store.dispatch("loadNextApiCollections",{show:!0})},async paginateItems(e){try{await this.$store.dispatch("loadApiItems",{link:e,show:!0,filters:this.filters})}catch(t){this.$store.commit("showGlobalError",{error:t,message:this.$t("errors.loadItems")})}},async filterItems(e,t){this.filters=e,t&&this.$store.commit("resetApiItems",this.data.getApiItemsLink());try{await this.$store.dispatch("loadApiItems",{link:this.data.getApiItemsLink(),show:!0,filters:e})}catch(s){let i=t?this.$t("errors.loadItems"):this.$t("errors.loadFilteredItems");this.$store.commit("showGlobalError",{error:s,message:i})}}}}),Ue={class:"intro"},je={key:5,class:"metadata mb-4"},ze=["innerHTML"],Ge=["innerHTML"],Ke={key:0,class:"mb-4"};function We(e,t,s,i,p,f){const c=a("DeprecationNotice"),y=a("AnonymizedNotice"),A=a("Description"),g=a("ReadMore"),L=a("Keywords"),_=a("CollectionLink"),b=X,w=Y,v=a("LinkList"),V=a("MapView"),E=a("b-tab"),B=a("Thumbnails"),F=a("b-tabs"),N=a("b-card"),C=a("Assets"),H=a("Providers"),U=a("MetadataGroups"),j=a("Catalogs"),he=a("Items");return n(),$("div",{class:q({cc:!0,[e.cssStacType]:!0,empty:!e.hasCatalogs&&!e.hasItems}),key:e.data.id},[m(w,null,{default:d(()=>[m(b,{class:"meta"},{default:d(()=>[k("section",Ue,[k("h2",null,I(e.$t("description")),1),t[4]||(t[4]=o()),e.showDeprecation?(n(),r(c,{key:0,data:e.data},null,8,["data"])):l("",!0),t[5]||(t[5]=o()),e.data["anon:warning"]?(n(),r(y,{key:1,warning:e.data["anon:warning"]},null,8,["warning"])):l("",!0),t[6]||(t[6]=o()),e.data.description?(n(),r(g,{key:2,lines:10,text:e.$t("read.more"),"text-less":e.$t("read.less")},{default:d(()=>[m(A,{description:e.data.description},null,8,["description"])]),_:1},8,["text","text-less"])):l("",!0),t[7]||(t[7]=o()),Array.isArray(e.data.keywords)&&e.data.keywords.length>0?(n(),r(L,{key:3,keywords:e.data.keywords,class:"mb-3"},null,8,["keywords"])):l("",!0),t[8]||(t[8]=o()),e.collectionLink?(n(),r(_,{key:4,link:e.collectionLink},null,8,["link"])):l("",!0),t[9]||(t[9]=o()),e.isCollection?(n(),$("section",je,[e.licenses?(n(),r(w,{key:0},{default:d(()=>[m(b,{md:"4",class:"label"},{default:d(()=>[o(I(e.$t("catalog.license")),1)]),_:1}),t[1]||(t[1]=o()),m(b,{md:"8",class:"value"},{default:d(()=>[k("span",{innerHTML:e.licenses},null,8,ze)]),_:1})]),_:1})):l("",!0),t[3]||(t[3]=o()),e.temporalExtents?(n(),r(w,{key:1},{default:d(()=>[m(b,{md:"4",class:"label"},{default:d(()=>[o(I(e.$t("catalog.temporalExtent")),1)]),_:1}),t[2]||(t[2]=o()),m(b,{md:"8",class:"value"},{default:d(()=>[k("span",{innerHTML:e.temporalExtents},null,8,Ge)]),_:1})]),_:1})):l("",!0)])):l("",!0),t[10]||(t[10]=o()),e.linkPosition==="left"?(n(),r(v,{key:6,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),t[12]||(t[12]=o()),e.isCollection||e.hasThumbnails?(n(),$("section",Ke,[m(N,{"no-body":"",class:"maps-preview"},{default:d(()=>[m(F,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=ce=>e.tab=ce),ref:"tabs",pills:"",card:"",vertical:"",end:""},{default:d(()=>[e.isCollection?(n(),r(E,{key:0,title:e.$t("map"),"no-body":""},{default:d(()=>[m(V,ye({stac:e.data},e.mapData,{onChanged:e.dataChanged,onEmpty:e.handleEmptyMap,onfocusOnly:"",popover:""}),null,16,["stac","onChanged","onEmpty"])]),_:1},8,["title"])):l("",!0),t[11]||(t[11]=o()),e.hasThumbnails?(n(),r(E,{key:1,title:e.$t("thumbnails"),"no-body":""},{default:d(()=>[m(B,{thumbnails:e.thumbnails},null,8,["thumbnails"])]),_:1},8,["title"])):l("",!0)]),_:1},8,["modelValue"])]),_:1})])):l("",!0),t[13]||(t[13]=o()),e.hasAssets?(n(),r(C,{key:1,assets:e.assets,context:e.data,shown:e.selectedReferences,onShowAsset:e.showAsset},null,8,["assets","context","shown","onShowAsset"])):l("",!0),t[14]||(t[14]=o()),e.hasItemAssets&&!e.hasItems?(n(),r(C,{key:2,assets:e.itemAssets,context:e.data,definition:!0},null,8,["assets","context"])):l("",!0),t[15]||(t[15]=o()),e.providers?(n(),r(H,{key:3,providers:e.providers},null,8,["providers"])):l("",!0),t[16]||(t[16]=o()),m(U,{class:"mb-4",type:e.data.type,data:e.data,ignoreFields:e.ignoredMetadataFields},null,8,["type","data","ignoreFields"]),t[17]||(t[17]=o()),e.linkPosition==="right"?(n(),r(v,{key:4,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),_:1}),t[19]||(t[19]=o()),e.hasCatalogs?(n(),r(b,{key:0,class:"catalogs-container"},{default:d(()=>[m(j,{catalogs:e.catalogs,hasMore:!!e.nextCollectionsLink,onLoadMore:e.loadMoreCollections},null,8,["catalogs","hasMore","onLoadMore"])]),_:1})):l("",!0),t[20]||(t[20]=o()),e.hasItems||e.hasItemAssets?(n(),r(b,{key:1,class:"items-container"},{default:d(()=>[m(he,{stac:e.data,items:e.items,api:e.isApi,showFilters:e.showFilters,apiFilters:e.filters,pagination:e.itemPages,loading:e.apiItemsLoading,count:e.apiItemsNumberMatched,onPaginate:e.paginateItems,onFilterItems:e.filterItems,onFiltersShown:e.filtersShown},null,8,["stac","items","api","showFilters","apiFilters","pagination","loading","count","onPaginate","onFilterItems","onFiltersShown"]),t[18]||(t[18]=o()),e.hasItemAssets?(n(),r(C,{key:0,assets:e.itemAssets,context:e.data,definition:!0},null,8,["assets","context"])):l("",!0)]),_:1})):l("",!0)]),_:1})],2)}const Qe=R(He,[["render",We]]),qe=T({name:"Browse",components:{Catalog:Qe,Item:Ne},mixins:[Ie],computed:{...O(["isItem"]),component(){return this.isItem?"Item":"Catalog"}}}),Je={class:"browse d-flex flex-column"};function Xe(e,t,s,i,p,f){const c=ke,y=a("ErrorAlert"),A=a("Loading");return n(),$("main",Je,[!e.allowExternalAccess&&e.isExternal?(n(),r(c,{key:0,show:""},{default:d(()=>[o(I(e.$t("errors.noExternalAccess")),1)]),_:1})):e.error?(n(),r(y,{key:1,url:e.url,description:e.errorDescription,id:e.errorId},null,8,["url","description","id"])):e.loading?(n(),r(A,{key:2,stretch:""})):(n(),r(Ae(e.component),{key:3}))])}const Ye=R(qe,[["render",Xe]]),rt=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));export{rt as B,oe as D};
//# sourceMappingURL=Browse-Dp7Bzzae.js.map
