import{I as Q,d as ae,e as le,f as te,aG as oe,h as X,i as re,r as A,g as Y,j as fe,bB as ce,w as K,n as y,p as S,q as Z,C as $,K as q,v as se,s as d,F as _,P as ee,c as p,m as pe,bK as me,L as Ie,y as V,A as z,B as W,ax as be,z as b,ci as c,G as ye,H as Ce,bL as ge,a1 as T,cj as ie,av as ke,aV as xe,am as Be,aa as E}from"./index-EEKoSAfw.js";function ne(C){return C.map(x=>x.type===Q?ne(x.children):x).flat()}const Te=ae({inheritAttrs:!1,__name:"BTab",props:ee({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},unmountLazy:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(C,{expose:x}){const a=le(C,"BTab"),H=te(),M=oe(),n=X(C,"active"),u=re(ie,null),B=A(a.id),o=Y("","tabpane"),I=p(()=>a.id??B.value??o.value),L=Y(()=>a.buttonId,"tab"),g=A(!1),P=fe("_el"),s=p(()=>{const{onClick:r,...D}=M;return D});function h(){if(!u)return;const r=u.registerTab(p(()=>({internalId:o.value,id:I.value,active:n.value,buttonId:L.value,disabled:a.disabled,title:a.title,titleComponent:H.title,titleItemClass:a.titleItemClass,titleLinkAttrs:a.titleLinkAttrs,titleLinkClass:a.titleLinkClass,onClick:M.onClick,el:P})));r!==B.value&&(B.value=r)}u&&(h(),n.value&&u.activateTab(o.value)),ce(()=>{u&&u.unregisterTab(o.value)});const m=p(()=>u?.activeId.value===I.value),k=A(m.value),j=p(()=>!!(u?.lazy.value||a.lazy)),U=p(()=>m.value&&!a.disabled),R=p(()=>U.value||!j.value||j.value&&!a.unmountLazy&&g.value);K(R,r=>{r&&!g.value&&(g.value=!0)}),K(m,r=>{if(r){n.value=!0,setTimeout(()=>{k.value=!0},0);return}k.value=!1,n.value=!1}),K(n,r=>{if(a.disabled){n.value=!1;return}if(u){if(!r){m.value&&u.activateTab(void 0);return}m.value||u.activateTab(o.value)}});const J=p(()=>[{active:m.value,show:k.value,"card-body":u?.card.value&&a.noBody===!1,fade:!u?.noFade.value},k.value?u?.activeTabClass.value:u?.inactiveTabClass.value,u?.tabClass.value]);return x({activate:()=>{n.value=!0},deactivate:()=>{n.value=!1}}),(r,D)=>(y(),S(_(d(a).tag),se({id:I.value,ref:"_el",class:["tab-pane",J.value],role:"tabpanel","aria-labelledby":d(L)},s.value),{default:Z(()=>[R.value?$(r.$slots,"default",{key:0}):q("",!0)]),_:3},16,["id","class","aria-labelledby"]))}}),Ae=["aria-orientation"],Le=["id","aria-controls","aria-selected","disabled","tabindex","onClick"],Ne=ae({__name:"BTabs",props:ee({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},index:{},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{index:{default:-1},indexModifiers:{},modelValue:{default:void 0},modelModifiers:{}}),emits:ee(["activate-tab"],["update:index","update:modelValue"]),setup(C,{emit:x}){const a=le(C,"BTabs"),H=x,M=te(),n=X(C,"index"),u=X(C,"modelValue"),B=ge(),o=A([]),I=A([]),L=A(!1),g=A([]),P=()=>{const l=ne(M.default?.({})??[]);I.value=(Array.isArray(l)?l:[l]).filter(e=>e.type===Te),g.value.length===0&&(g.value=I.value.map(e=>d(Y(()=>e.props?.id,"tabpane")))),L.value=I.value.some(e=>e.props?.active!==void 0&&e.props?.active!==!1)};P(),K(()=>M.default?.({}),()=>{P(),T(()=>{G()})});const s=p(()=>{if(o.value.length===0){const l=I.value.findIndex(e=>e.props?.active!==void 0&&(e.props.disabled===!1||e.props.disabled===void 0)||u.value&&e.props?.id===u.value);return I.value.map((e,t)=>{const v=l!==-1?t===l:n.value>-1?t===n.value:t===0;return{id:e.props?.id??g.value[t],internalId:`premount-${t}`,buttonId:e.props?.buttonId,disabled:e.props?.disabled,title:e.props?.title,titleComponent:e.children?.title,titleItemClass:e.props?.titleItemClass,titleLinkAttrs:e.props?.titleLinkAttrs,titleLinkClass:e.props?.titleLinkClass,onClick:e.props?.onClick,active:v,navItemClasses:[{active:v,disabled:!(e.props?.disabled===!1||e.props?.disabled===void 0)},v?a.activeNavItemClass:a.inactiveNavItemClass,a.navItemClass]}})}return o.value.map(l=>{const e=d(l),t=e.id===u.value;return{...e,active:t,navItemClasses:[{active:t,disabled:e.disabled},t?a.activeNavItemClass:a.inactiveNavItemClass,a.navItemClass]}})});let h=!1,m=!1,k=!1;n.value===-1&&u.value?s.value.findIndex(l=>l.id===u.value)!==-1?n.value=s.value.findIndex(l=>l.id===u.value):m=!0:n.value>-1&&!u.value?s.value[n.value]?.id?u.value=s.value[n.value]?.id:k=!0:n.value===-1&&!u.value&&!L.value?(n.value=s.value.findIndex(l=>l.disabled===void 0||l.disabled===!1),u.value=s.value[n.value]?.id):n.value===-1&&!u.value&&L.value&&(n.value=s.value.findIndex(l=>l.active!==void 0&&l.active!==!1&&(l.disabled===void 0||l.disabled===!1)),u.value=s.value[n.value]?.id);function j(){if(m){const l=s.value.findIndex(e=>e.id===u.value);l!==-1&&T(()=>{n.value=l,m=!1})}k&&n.value>-1&&s.value[n.value]?.id&&T(()=>{u.value=s.value[n.value]?.id,k=!1})}j();const U=p(()=>!(s?.value&&s.value.length>0)),R=p(()=>({"d-flex":a.vertical,"align-items-start":a.vertical})),J=xe(()=>a.align),r=p(()=>({"nav-pills":a.pills,"nav-underline":a.underline,"flex-column me-3":a.vertical,[J.value]:a.align!==void 0,"nav-fill":a.fill,"card-header-tabs":a.card&&!a.pills&&!a.underline,"card-header-pills":a.card&&a.pills,"nav-justified":a.justified,"nav-tabs":!a.noNavStyle&&!a.pills&&!a.underline,small:a.small})),D=(l,e)=>{if(e>=0&&!s.value[e].disabled&&s.value[e]?.onClick&&typeof s.value[e].onClick=="function"&&(s.value[e].onClick?.(l),l.defaultPrevented)){document.getElementById(s.value[e].buttonId)?.blur();return}n.value=e},f=(l,e)=>{s.value.length<=0||a.noKeyNav||(l.preventDefault(),l.stopPropagation(),n.value=N(n.value+e,e),T(()=>{n.value>=0&&document.getElementById(s.value[n.value]?.buttonId)?.focus()}))},N=(l,e)=>{let t=l,v=-1,i=-1;for(let F=0;F<s.value.length;F++)s.value[F].disabled||(v===-1&&(v=F),i=F);for(;t>=v&&t<=i&&s.value[t].disabled;)t+=e;return t<v&&(t=v),t>i&&(t=i),t};let w,O=!1;K(n,(l,e)=>{if(s.value.length<=0||s.value.filter(i=>!i.disabled).length<=0)return;if(O){O=!1;return}const t=N(l,l>e?1:-1);if(t!==l){w=e,n.value=t;return}const v=new ke("activate-tab",{cancelable:!0});if(H("activate-tab",s.value[t]?.id,s.value[w??e]?.id,t,w??e,v),v.defaultPrevented){O=!0;const i=w??e??N(0,1);w=void 0,u.value!==s.value[i]?.id&&(u.value=s.value[i]?.id),T(()=>{i>=0&&document.getElementById(s.value[i]?.buttonId)?.focus()});return}u.value!==s.value[t]?.id&&(u.value=s.value[t]?.id),w=void 0}),K(u,(l,e)=>{if(s.value.length<=0||s.value.filter(i=>!i.disabled).length<=0)return;const t=s.value.findIndex(i=>i.id===l);if(t===n.value)return;const v=s.value.findIndex(i=>i.id===e);if(s.value[t]?.disabled){n.value=N(t,t>v?1:-1);return}if(t===-1){n.value=N(0,1),T(()=>{u.value=s.value[n.value]?.id});return}n.value=t});const de=l=>{const e=o.value.findIndex(v=>v.value.internalId===l.value.internalId);e===-1?(o.value.push(l),h&&T(()=>{G()})):(o.value[e]=l,h&&G());const t=o.value.findIndex(v=>v.value.internalId===l.value.internalId);return l.value.id??(h?l.value.internalId:g.value[t])};pe(()=>{j(),G(),h=!0});const G=()=>{o.value.sort((l,e)=>me(l.value.el.value,e.value.el.value)),u.value&&n.value!==s.value.findIndex(l=>l.id===u.value)&&(n.value=s.value.findIndex(l=>l.id===u.value))},ve=l=>{o.value=o.value.filter(e=>e.value.internalId!==l)};return Be(ie,{lazy:E(()=>a.lazy),card:E(()=>a.card),noFade:E(()=>a.noFade),activeTabClass:E(()=>a.activeTabClass),inactiveTabClass:E(()=>a.inactiveTabClass),tabClass:E(()=>a.tabClass),registerTab:de,unregisterTab:ve,activeId:u,activateTab:l=>{const e=s.value.findIndex(t=>t.internalId===l);if(l===void 0||e===-1){n.value=N(0,1);return}n.value=e}}),(l,e)=>(y(),S(_(d(a).tag),{id:d(a).id,class:z(["tabs",R.value])},{default:Z(()=>[Ie(d(B).define,null,{default:Z(()=>[V("div",{class:z(["tab-content",d(a).contentClass])},[$(l.$slots,"default"),U.value?(y(),W("div",{key:"bv-empty-tab",class:z(["tab-pane active",{"card-body":d(a).card}])},[$(l.$slots,"empty")],2)):q("",!0)],2)]),_:3}),d(a).end?(y(),S(d(B).reuse,{key:0})):q("",!0),V("div",{class:z([d(a).navWrapperClass,{"card-header":d(a).card,"ms-auto":l.vertical&&d(a).end}])},[V("ul",{class:z(["nav",[r.value,d(a).navClass]]),role:"tablist","aria-orientation":d(a).vertical?"vertical":"horizontal"},[$(l.$slots,"tabs-start"),(y(!0),W(Q,null,be(s.value,(t,v)=>(y(),W("li",{key:t.id??t.internalId,class:z(["nav-item",t.titleItemClass]),role:"presentation"},[V("button",se({id:t.buttonId,class:["nav-link",[t.navItemClasses,t.titleLinkClass]],role:"tab","aria-controls":t.id,"aria-selected":t.active,disabled:t.disabled,tabindex:d(a).noKeyNav||t.active?void 0:-1,type:"button"},{ref_for:!0},t.titleLinkAttrs,{onKeydown:[e[0]||(e[0]=c(b(i=>!d(a).vertical&&f(i,-1),["exact"]),["left"])),e[1]||(e[1]=c(b(i=>!d(a).vertical&&f(i,-999),["shift"]),["left"])),e[2]||(e[2]=c(b(i=>d(a).vertical&&f(i,-1),["exact"]),["up"])),e[3]||(e[3]=c(b(i=>d(a).vertical&&f(i,-999),["shift"]),["up"])),e[4]||(e[4]=c(b(i=>!d(a).vertical&&f(i,1),["exact"]),["right"])),e[5]||(e[5]=c(b(i=>!d(a).vertical&&f(i,999),["shift"]),["right"])),e[6]||(e[6]=c(b(i=>d(a).vertical&&f(i,1),["exact"]),["down"])),e[7]||(e[7]=c(b(i=>d(a).vertical&&f(i,999),["shift"]),["down"])),e[8]||(e[8]=c(i=>f(i,-999),["page-up"])),e[9]||(e[9]=c(i=>f(i,999),["page-down"])),e[10]||(e[10]=c(i=>f(i,-999),["home"])),e[11]||(e[11]=c(i=>f(i,999),["end"]))],onClick:b(i=>D(i,v),["stop"])}),[t.titleComponent?(y(),S(_(t.titleComponent),{key:0})):(y(),W(Q,{key:1},[ye(Ce(t.title),1)],64))],16,Le)],2))),128)),$(l.$slots,"tabs-end")],10,Ae)],2),d(a).end?q("",!0):(y(),S(d(B).reuse,{key:1}))]),_:3},8,["id","class"]))}});export{Ne as _,Te as a,ne as f};
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-CmvwVo5W.js.map
